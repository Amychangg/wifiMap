<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #map{
            height:550px;
            width:100%;
        }
    </style>
</head>
<body>
    <h3>My Google Maps Demo</h3>
    <!--The div element for the map -->
    <div id="map"></div>
    <script>
        function initMap(){
            var uluru = {lat: 23.636, lng: 121.044};
            var map = new google.maps.Map(document.getElementById('map'),{
                zoom: 11,
                center: uluru
            });
            
            var xhr = new XMLHttpRequest();
            xhr.open('GET','itw_tw.json');
            xhr.onreadystatechange = function(){
                if(xhr.readyState===4 && xhr.status===200){
                    var data = JSON.parse(xhr.responseText);
                    data.forEach(function(value,index){
                        var lat = value.LATITUDE;
                        var lng = value.LONGTITUDE;
                        var latLng = new google.maps.LatLng(lat,lng);
                        var marker = new google.maps.Marker({
                            position: uluru,
                            map: map
                        });
                        var contentString = '<div>'+ value.NAME + '</div><div>'+ value.ADDR + '</div>';
                        var infowindow = new google.maps.InfoWindow({content: contentString,});
                        marker.addListener("click", () => {
                            infowindow.open({map,marker});
                        });
                    });
                }
            };
            xhr.send();

        }

    </script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCnz3iVA9wOl5Q19L7iM8rHVuZq1oTWQbE&callback=initMap">
    </script>
</body>
</html>